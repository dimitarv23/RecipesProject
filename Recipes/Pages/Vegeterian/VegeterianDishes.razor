@page "/vegeteriandishes"

@inject IRecipeRepository _recipeRepository

<div style="padding: 20px 250px;">
    @*Heading*@
    <div class="text-center">
        <h1 style="font-size: 56px;">
            Vegeterian Dishes
            <small class="text-muted p-1">Recipes</small>
        </h1>
    </div>

    @*Hook*@
    <div class="text-center mt-5" style="font-size: 26px; line-height: 32px;">
        <p>
            A recent poll found that nearly 10 percent of adult Americans consider themselves vegetarian—that’s
            nearly 33 million people trying to figure out what the heck to eat for dinner.
            It’s true, we do have a TON of lists dedicated to weeknight dinners filled with steak,
            chicken, and seafood, but don’t worry: Vegetarians, we’ve got you, too.
        </p>

        <p>
            Whether you’re a lifelong vegetarian, a curious omnivore, or are just looking for healthy recipe ideas 
            for meatless Mondays, you're guaranteed to love these incredible vegetarian dishes.
        </p>

        <p>
            
        </p>
    </div>

    @*Recipes*@
    <div class="container">
        <div class="row">
            <div class="col-12 mb-5 mt-5">
                <_CreateRecipe ImageSource="/images/vegeterian-dishes-images/createDish.jpg" />

                <div style="margin-top: 40px; display: flex;">
                    @foreach (var obj in Recipes.Where(x => x.Type.ToLower() == "vegetarian"))
                    {
                        <div class="col-4 mb-5" style="margin-right: 20px; border: 5px inset lightblue;">
                            <a href="/dishes/@obj.Type/@obj.ID" style="width: 150px;">
                                <div class="item"
                                 style="display: flex; background: rgb(136, 174, 203); align-items: center;">
                                    <img src="/images/vegeterian-dishes-images/@obj.ImageSource"
                                     style="object-fit: fill; width: 230px; margin: 10px; border: 3px inset white;" />

                                    <h3 class="text-center" style="font-size: 22px;">@obj.Name</h3>
                                </div>
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    private IEnumerable<RecipeDTO> Recipes { get; set; } = new List<RecipeDTO>();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            StateHasChanged();
            await LoadCategories();
            StateHasChanged();
        }
    }

    private async Task LoadCategories()
    {
        Recipes = await _recipeRepository.GetAll();
    }
}


